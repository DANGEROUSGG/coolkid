-- Create the ScreenGui
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "MyGUI"
screenGui.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")

-- Create the green ScrollingFrame
local frame = Instance.new("ScrollingFrame")
frame.Size = UDim2.new(0, 300, 0, 500)  -- Adjust size to accommodate all elements
frame.Position = UDim2.new(0.5, -150, 0.5, -250)
frame.BackgroundColor3 = Color3.fromRGB(0, 255, 0)
frame.ScrollBarThickness = 10  -- Set thickness for the scrollbar
frame.Parent = screenGui
frame.Visible = true -- Make sure the frame is visible

-- Add UIListLayout for vertical arrangement inside the ScrollingFrame
local layout = Instance.new("UIListLayout")
layout.FillDirection = Enum.FillDirection.Vertical
layout.Padding = UDim.new(0, 10)  -- Space between items in the list
layout.SortOrder = Enum.SortOrder.LayoutOrder
layout.Parent = frame

-- Ensure the list is automatically updated when new buttons are added
frame.CanvasSize = UDim2.new(0, 0, 0, layout.AbsoluteContentSize.Y)

-- Make the frame draggable
local dragging = false
local dragStart = nil
local startPos = nil

frame.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = true
        dragStart = input.Position
        startPos = frame.Position
    end
end)

frame.InputChanged:Connect(function(input)
    if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
        local delta = input.Position - dragStart
        frame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
    end
end)

frame.InputEnded:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = false
    end
end)

-- Create the TextBox for changing display name
local displayNameTextBox = Instance.new("TextBox")
displayNameTextBox.Size = UDim2.new(0, 250, 0, 40)
displayNameTextBox.Text = "Enter Display Name"
displayNameTextBox.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
displayNameTextBox.TextColor3 = Color3.fromRGB(0, 0, 0)
displayNameTextBox.Font = Enum.Font.SourceSans
displayNameTextBox.TextSize = 18
displayNameTextBox.Parent = frame
displayNameTextBox.Visible = true -- Make sure the text box is visible

-- Create the Change Name button (simulates username change by changing display name)
local changeNameButton = Instance.new("TextButton")
changeNameButton.Size = UDim2.new(0, 250, 0, 40)
changeNameButton.Text = "Change Display Name"
changeNameButton.BackgroundColor3 = Color3.fromRGB(255, 255, 0)
changeNameButton.TextColor3 = Color3.fromRGB(0, 0, 0)
changeNameButton.Font = Enum.Font.SourceSans
changeNameButton.TextSize = 18
changeNameButton.Parent = frame
changeNameButton.Visible = true -- Make sure the button is visible

-- Change Display Name functionality
changeNameButton.MouseButton1Click:Connect(function()
    local player = game.Players.LocalPlayer
    local newDisplayName = displayNameTextBox.Text
    if newDisplayName ~= "" then
        player.DisplayName = newDisplayName  -- Changes the player's DisplayName in-game
    else
        player.DisplayName = "Player"  -- Default if no input is given
    end
end)

-- Create the God Mode button
local godButton = Instance.new("TextButton")
godButton.Size = UDim2.new(0, 250, 0, 40)
godButton.Text = "God Mode"
godButton.BackgroundColor3 = Color3.fromRGB(0, 255, 0)
godButton.TextColor3 = Color3.fromRGB(255, 255, 255)
godButton.Font = Enum.Font.SourceSans
godButton.TextSize = 24
godButton.Parent = frame
godButton.Visible = true -- Make sure the god button is visible

-- God Mode functionality (toggle on and off)
local isGodMode = false

godButton.MouseButton1Click:Connect(function()
    local player = game.Players.LocalPlayer
    local character = player.Character or player.CharacterAdded:Wait()

    -- Toggle God Mode
    if isGodMode then
        -- Disable God Mode
        if character:FindFirstChild("Humanoid") then
            local humanoid = character:FindFirstChildOfClass("Humanoid")
            humanoid.HealthChanged:Disconnect()  -- Disconnect the health maintenance
            humanoid.Health = humanoid.MaxHealth  -- Reset health back to max
        end
        godButton.Text = "God Mode"  -- Update button text
        isGodMode = false
    else
        -- Enable God Mode
        if character:FindFirstChild("Humanoid") then
            local humanoid = character:FindFirstChildOfClass("Humanoid")
            humanoid.Health = humanoid.MaxHealth -- Set health to max
            humanoid.HealthChanged:Connect(function()
                humanoid.Health = humanoid.MaxHealth -- Keep health at max
            end)
        end
        godButton.Text = "Ungod Mode"  -- Update button text
        isGodMode = true
    end
end)

-- Create the Give Sword button
local swordButton = Instance.new("TextButton")
swordButton.Size = UDim2.new(0, 250, 0, 40)
swordButton.Text = "Give Sword"
swordButton.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
swordButton.TextColor3 = Color3.fromRGB(255, 255, 255)
swordButton.Font = Enum.Font.SourceSans
swordButton.TextSize = 18
swordButton.Parent = frame
swordButton.Visible = true -- Make sure the sword button is visible

-- Sword functionality
swordButton.MouseButton1Click:Connect(function()
    local player = game.Players.LocalPlayer
    local character = player.Character or player.CharacterAdded:Wait()
    local sword = Instance.new("Tool")
    sword.Name = "Sword"
    sword.RequiresHandle = true
    sword.Parent = player.Backpack

    -- Create a simple sword handle
    local handle = Instance.new("Part")
    handle.Size = Vector3.new(0.2, 5, 0.2)
    handle.Color = Color3.fromRGB(255, 0, 0)
    handle.Anchored = false
    handle.CanCollide = false
    handle.Name = "Handle"
    handle.Parent = sword
end)

-- Create the Respawn button
local respawnButton = Instance.new("TextButton")
respawnButton.Size = UDim2.new(0, 250, 0, 40)
respawnButton.Text = "Respawn"
respawnButton.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
respawnButton.TextColor3 = Color3.fromRGB(0, 0, 0)
respawnButton.Font = Enum.Font.SourceSans
respawnButton.TextSize = 18
respawnButton.Parent = frame
respawnButton.Visible = true -- Make sure the respawn button is visible

-- Respawn functionality
respawnButton.MouseButton1Click:Connect(function()
    local player = game.Players.LocalPlayer
    local character = player.Character

    if character then
        -- Destroy the old character and respawn the player
        player:LoadCharacter()
    end
end)

-- Create the Change Sky button
local skyButton = Instance.new("TextButton")
skyButton.Size = UDim2.new(0, 250, 0, 40)
skyButton.Text = "Change Sky"
skyButton.BackgroundColor3 = Color3.fromRGB(0, 0, 255)
skyButton.TextColor3 = Color3.fromRGB(255, 255, 255)
skyButton.Font = Enum.Font.SourceSans
skyButton.TextSize = 24
skyButton.Parent = frame
skyButton.Visible = true -- Make sure the change sky button is visible

-- Skybox change logic
local skybox1 = "rbxassetid://123456789"  -- Replace with a valid asset ID for the skybox
local skybox2 = "rbxassetid://987654321"  -- Replace with another valid asset ID for the skybox

-- Function to change the skybox
local function changeSkybox()
    local sky = Instance.new("Sky")
    sky.SkyboxBk = skybox1
    sky.SkyboxDn = skybox1
    sky.SkyboxFt = skybox1
    sky.SkyboxLf = skybox1
    sky.SkyboxRt = skybox1
    sky.SkyboxUp = skybox1
    sky.Parent = game.Lighting
end

-- Toggle the skybox between two options when the button is clicked
skyButton.MouseButton1Click:Connect(function()
    if game.Lighting:FindFirstChildOfClass("Sky") then
        game.Lighting:FindFirstChildOfClass("Sky"):Destroy()
    end
    changeSkybox()
end)
