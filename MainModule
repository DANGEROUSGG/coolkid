-- Create the ScreenGui
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "MyGUI"
screenGui.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")

-- Create the Frame
local frame = Instance.new("Frame")
frame.Size = UDim2.new(0, 300, 0, 350)
frame.Position = UDim2.new(0.5, -150, 0.5, -175)
frame.BackgroundColor3 = Color3.fromRGB(0, 255, 0)
frame.Parent = screenGui
frame.Visible = true -- Make sure the frame is visible

-- Make the frame draggable
local dragging = false
local dragInput, dragStart, startPos

frame.InputBegan:Connect(function(input, gameProcessed)
    if gameProcessed then return end
    
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = true
        dragStart = input.Position
        startPos = frame.Position
    end
end)

frame.InputChanged:Connect(function(input)
    if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
        local delta = input.Position - dragStart
        frame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
    end
end)

frame.InputEnded:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = false
    end
end)

-- Create the God Mode Button
local godButton = Instance.new("TextButton")
godButton.Size = UDim2.new(0, 150, 0, 50)
godButton.Position = UDim2.new(0.5, -75, 0.6, -25)  -- Adjusted position
godButton.BackgroundColor3 = Color3.fromRGB(0, 255, 0)
godButton.Text = "God Mode"
godButton.TextColor3 = Color3.fromRGB(255, 255, 255)
godButton.Font = Enum.Font.SourceSans
godButton.TextSize = 24
godButton.BackgroundTransparency = 0.3  -- Make sure button is visible
godButton.Parent = frame
godButton.Visible = true -- Make sure the god button is visible

-- God Mode logic
local player = game.Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local humanoid = character:WaitForChild("Humanoid")

-- Variable to track God Mode state
local godModeActive = false

-- Function to activate God Mode
local function activateGodMode()
    godModeActive = true
    humanoid.Health = humanoid.Health -- Reset health to current to avoid it dropping below 0.
    humanoid.MaxHealth = math.huge  -- Set MaxHealth to infinite
    humanoid.HealthChanged:Connect(function()
        if godModeActive then
            humanoid.Health = humanoid.MaxHealth  -- Keep health at max if God Mode is active
        end
    end)
end

-- Function to deactivate God Mode
local function deactivateGodMode()
    godModeActive = false
    humanoid.MaxHealth = 100 -- Reset MaxHealth to default
    humanoid.Health = humanoid.MaxHealth  -- Reset health to default max health
end

-- Toggle God Mode when the button is clicked
godButton.MouseButton1Click:Connect(function()
    if godModeActive then
        deactivateGodMode()
        godButton.Text = "God Mode"  -- Change button text back
    else
        activateGodMode()
        godButton.Text = "Disable God"  -- Change button text to show disabled option
    end
end)

-- Create the Change Sky Button
local skyButton = Instance.new("TextButton")
skyButton.Size = UDim2.new(0, 150, 0, 50)
skyButton.Position = UDim2.new(0.5, -75, 0.75, 25)  -- Adjusted position
skyButton.BackgroundColor3 = Color3.fromRGB(0, 0, 255)
skyButton.Text = "Change Sky"
skyButton.TextColor3 = Color3.fromRGB(255, 255, 255)
skyButton.Font = Enum.Font.SourceSans
skyButton.TextSize = 24
skyButton.BackgroundTransparency = 0.3  -- Make sure button is visible
skyButton.Parent = frame
skyButton.Visible = true -- Make sure the change sky button is visible

-- Skybox change logic
local skybox1 = "rbxassetid://123456789"  -- Replace with a valid asset ID for the skybox
local skybox2 = "rbxassetid://987654321"  -- Replace with another valid asset ID for the skybox

-- Function to change the skybox
local function changeSkybox()
    local sky = Instance.new("Sky")
    sky.SkyboxBk = skybox1
    sky.SkyboxDn = skybox1
    sky.SkyboxFt = skybox1
    sky.SkyboxLf = skybox1
    sky.SkyboxRt = skybox1
    sky.SkyboxUp = skybox1
    sky.Parent = game.Lighting
end

-- Toggle the skybox between two options when the button is clicked
skyButton.MouseButton1Click:Connect(function()
    if game.Lighting:FindFirstChildOfClass("Sky") then
        game.Lighting:FindFirstChildOfClass("Sky"):Destroy()
    end
    changeSkybox()
end)
